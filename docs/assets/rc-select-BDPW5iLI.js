import{r as t,a as In}from"./react-jFU0esu9.js";import{K as y,w as ft,i as dt,C as gn,b as vt,n as mt,h as gt,u as pt,e as Rn,p as ht,A as bt,c as St,z as wt}from"./rc-util-BGVI6VDl.js";import{c as Ue}from"./classnames-ixCMRz17.js";import"./react-is-CX4zgkE_.js";import{F as Ct}from"./rc-overflow-hCo2P9PI.js";import"./react-dom-Dl7ImxMp.js";import"./rc-resize-observer-CUhI3ncJ.js";import"./rc-motion-BS5OivOI.js";import{d as pn,c as ue,e as Q,b as ie,g as ze,k as en,o as yt,f as Ie}from"./@babel-D91nw8a6.js";import{T as It}from"./@rc-component-CHdcDd_A.js";import{L as Et}from"./rc-virtual-list-Bs7hgjzb.js";var hn=function(e){var o=e.className,a=e.customizeIcon,r=e.customizeIconProps,i=e.children,u=e.onMouseDown,c=e.onClick,v=typeof a=="function"?a(r):a;return t.createElement("span",{className:o,onMouseDown:function(s){s.preventDefault(),u==null||u(s)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:c,"aria-hidden":!0},v!==void 0?v:t.createElement("span",{className:Ue(o.split(/\s+/).map(function(m){return"".concat(m,"-icon")}))},i))},Rt=function(e,o,a,r,i){var u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,c=arguments.length>6?arguments[6]:void 0,v=arguments.length>7?arguments[7]:void 0,m=In.useMemo(function(){if(pn(r)==="object")return r.clearIcon;if(i)return i},[r,i]),s=In.useMemo(function(){return!!(!u&&r&&(a.length||c)&&!(v==="combobox"&&c===""))},[r,u,a.length,c,v]);return{allowClear:s,clearIcon:In.createElement(hn,{className:"".concat(e,"-clear"),onMouseDown:o,customizeIcon:m},"×")}},Bn=t.createContext(null);function xt(){return t.useContext(Bn)}function Dt(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,e=t.useState(!1),o=ue(e,2),a=o[0],r=o[1],i=t.useRef(null),u=function(){window.clearTimeout(i.current)};t.useEffect(function(){return u},[]);var c=function(m,s){u(),i.current=window.setTimeout(function(){r(m),s&&s()},n)};return[a,c,u]}function Wn(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,e=t.useRef(null),o=t.useRef(null);t.useEffect(function(){return function(){window.clearTimeout(o.current)}},[]);function a(r){(r||e.current===null)&&(e.current=r),window.clearTimeout(o.current),o.current=window.setTimeout(function(){e.current=null},n)}return[function(){return e.current},a]}function Ot(n,e,o,a){var r=t.useRef(null);r.current={open:e,triggerOpen:o,customizedTrigger:a},t.useEffect(function(){function i(u){var c;if(!((c=r.current)!==null&&c!==void 0&&c.customizedTrigger)){var v=u.target;v.shadowRoot&&u.composed&&(v=u.composedPath()[0]||v),r.current.open&&n().filter(function(m){return m}).every(function(m){return!m.contains(v)&&m!==v})&&r.current.triggerOpen(!1)}}return window.addEventListener("mousedown",i),function(){return window.removeEventListener("mousedown",i)}},[])}function Mt(n){return n&&![y.ESC,y.SHIFT,y.BACKSPACE,y.TAB,y.WIN_KEY,y.ALT,y.META,y.WIN_KEY_RIGHT,y.CTRL,y.SEMICOLON,y.EQUALS,y.CAPS_LOCK,y.CONTEXT_MENU,y.F1,y.F2,y.F3,y.F4,y.F5,y.F6,y.F7,y.F8,y.F9,y.F10,y.F11,y.F12].includes(n)}var Pt=function(e,o){var a,r=e.prefixCls,i=e.id,u=e.inputElement,c=e.disabled,v=e.tabIndex,m=e.autoFocus,s=e.autoComplete,g=e.editable,M=e.activeDescendantId,l=e.value,D=e.maxLength,S=e.onKeyDown,I=e.onMouseDown,A=e.onChange,re=e.onPaste,z=e.onCompositionStart,P=e.onCompositionEnd,Z=e.open,ne=e.attrs,H=u||t.createElement("input",null),j=H,te=j.ref,q=j.props,B=q.onKeyDown,K=q.onChange,G=q.onMouseDown,F=q.onCompositionStart,ee=q.onCompositionEnd,Y=q.style;return ft(!("maxLength"in H.props)),H=t.cloneElement(H,Q(Q(Q({type:"search"},q),{},{id:i,ref:dt(o,te),disabled:c,tabIndex:v,autoComplete:s||"off",autoFocus:m,className:Ue("".concat(r,"-selection-search-input"),(a=H)===null||a===void 0||(a=a.props)===null||a===void 0?void 0:a.className),role:"combobox","aria-expanded":Z||!1,"aria-haspopup":"listbox","aria-owns":"".concat(i,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(i,"_list"),"aria-activedescendant":Z?M:void 0},ne),{},{value:g?l:"",maxLength:D,readOnly:!g,unselectable:g?null:"on",style:Q(Q({},Y),{},{opacity:g?null:0}),onKeyDown:function(x){S(x),B&&B(x)},onMouseDown:function(x){I(x),G&&G(x)},onChange:function(x){A(x),K&&K(x)},onCompositionStart:function(x){z(x),F&&F(x)},onCompositionEnd:function(x){P(x),ee&&ee(x)},onPaste:re})),H},Un=t.forwardRef(Pt);function Hn(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}var Nt=typeof window<"u"&&window.document&&window.document.documentElement,Tt=Nt;function Vt(n){return n!=null}function _t(n){return!n&&n!==0}function An(n){return["string","number"].includes(pn(n))}function jn(n){var e=void 0;return n&&(An(n.title)?e=n.title.toString():An(n.label)&&(e=n.label.toString())),e}function Lt(n,e){Tt?t.useLayoutEffect(n,e):t.useEffect(n,e)}function At(n){var e;return(e=n.key)!==null&&e!==void 0?e:n.value}var Fn=function(e){e.preventDefault(),e.stopPropagation()},Ft=function(e){var o=e.id,a=e.prefixCls,r=e.values,i=e.open,u=e.searchValue,c=e.autoClearSearchValue,v=e.inputRef,m=e.placeholder,s=e.disabled,g=e.mode,M=e.showSearch,l=e.autoFocus,D=e.autoComplete,S=e.activeDescendantId,I=e.tabIndex,A=e.removeIcon,re=e.maxTagCount,z=e.maxTagTextLength,P=e.maxTagPlaceholder,Z=P===void 0?function(C){return"+ ".concat(C.length," ...")}:P,ne=e.tagRender,H=e.onToggleOpen,j=e.onRemove,te=e.onInputChange,q=e.onInputPaste,B=e.onInputKeyDown,K=e.onInputMouseDown,G=e.onInputCompositionStart,F=e.onInputCompositionEnd,ee=t.useRef(null),Y=t.useState(0),X=ue(Y,2),x=X[0],V=X[1],_=t.useState(!1),W=ue(_,2),Ae=W[0],Ee=W[1],ae="".concat(a,"-selection"),fe=i||g==="multiple"&&c===!1||g==="tags"?u:"",He=g==="tags"||g==="multiple"&&c===!1||M&&(i||Ae);Lt(function(){V(ee.current.scrollWidth)},[fe]);var oe=function(O,h,L,$,J){return t.createElement("span",{title:jn(O),className:Ue("".concat(ae,"-item"),ie({},"".concat(ae,"-item-disabled"),L))},t.createElement("span",{className:"".concat(ae,"-item-content")},h),$&&t.createElement(hn,{className:"".concat(ae,"-item-remove"),onMouseDown:Fn,onClick:J,customizeIcon:A},"×"))},Fe=function(O,h,L,$,J,k){var pe=function(ke){Fn(ke),H(!i)};return t.createElement("span",{onMouseDown:pe},ne({label:h,value:O,disabled:L,closable:$,onClose:J,isMaxTag:!!k}))},Pe=function(O){var h=O.disabled,L=O.label,$=O.value,J=!s&&!h,k=L;if(typeof z=="number"&&(typeof L=="string"||typeof L=="number")){var pe=String(k);pe.length>z&&(k="".concat(pe.slice(0,z),"..."))}var Re=function(Ne){Ne&&Ne.stopPropagation(),j(O)};return typeof ne=="function"?Fe($,k,h,J,Re):oe(O,k,h,J,Re)},ve=function(O){var h=typeof Z=="function"?Z(O):Z;return typeof ne=="function"?Fe(void 0,h,!1,!1,void 0,!0):oe({title:h},h,!1)},E=t.createElement("div",{className:"".concat(ae,"-search"),style:{width:x},onFocus:function(){Ee(!0)},onBlur:function(){Ee(!1)}},t.createElement(Un,{ref:v,open:i,prefixCls:a,id:o,inputElement:null,disabled:s,autoFocus:l,autoComplete:D,editable:He,activeDescendantId:S,value:fe,onKeyDown:B,onMouseDown:K,onChange:te,onPaste:q,onCompositionStart:G,onCompositionEnd:F,tabIndex:I,attrs:gn(e,!0)}),t.createElement("span",{ref:ee,className:"".concat(ae,"-search-mirror"),"aria-hidden":!0},fe," ")),f=t.createElement(Ct,{prefixCls:"".concat(ae,"-overflow"),data:r,renderItem:Pe,renderRest:ve,suffix:E,itemKey:At,maxCount:re});return t.createElement("span",{className:"".concat(ae,"-wrap")},f,!r.length&&!fe&&t.createElement("span",{className:"".concat(ae,"-placeholder")},m))},kt=function(e){var o=e.inputElement,a=e.prefixCls,r=e.id,i=e.inputRef,u=e.disabled,c=e.autoFocus,v=e.autoComplete,m=e.activeDescendantId,s=e.mode,g=e.open,M=e.values,l=e.placeholder,D=e.tabIndex,S=e.showSearch,I=e.searchValue,A=e.activeValue,re=e.maxLength,z=e.onInputKeyDown,P=e.onInputMouseDown,Z=e.onInputChange,ne=e.onInputPaste,H=e.onInputCompositionStart,j=e.onInputCompositionEnd,te=e.title,q=t.useState(!1),B=ue(q,2),K=B[0],G=B[1],F=s==="combobox",ee=F||S,Y=M[0],X=I||"";F&&A&&!K&&(X=A),t.useEffect(function(){F&&G(!1)},[F,A]);var x=s!=="combobox"&&!g&&!S?!1:!!X,V=te===void 0?jn(Y):te,_=t.useMemo(function(){return Y?null:t.createElement("span",{className:"".concat(a,"-selection-placeholder"),style:x?{visibility:"hidden"}:void 0},l)},[Y,x,l,a]);return t.createElement("span",{className:"".concat(a,"-selection-wrap")},t.createElement("span",{className:"".concat(a,"-selection-search")},t.createElement(Un,{ref:i,prefixCls:a,id:r,open:g,inputElement:o,disabled:u,autoFocus:c,autoComplete:v,editable:ee,activeDescendantId:m,value:X,onKeyDown:z,onMouseDown:P,onChange:function(Ae){G(!0),Z(Ae)},onPaste:ne,onCompositionStart:H,onCompositionEnd:j,tabIndex:D,attrs:gn(e,!0),maxLength:F?re:void 0})),!F&&Y?t.createElement("span",{className:"".concat(a,"-selection-item"),title:V,style:x?{visibility:"hidden"}:void 0},Y.label):null,_)},Kt=function(e,o){var a=t.useRef(null),r=t.useRef(!1),i=e.prefixCls,u=e.open,c=e.mode,v=e.showSearch,m=e.tokenWithEnter,s=e.disabled,g=e.prefix,M=e.autoClearSearchValue,l=e.onSearch,D=e.onSearchSubmit,S=e.onToggleOpen,I=e.onInputKeyDown,A=e.domRef;t.useImperativeHandle(o,function(){return{focus:function(V){a.current.focus(V)},blur:function(){a.current.blur()}}});var re=Wn(0),z=ue(re,2),P=z[0],Z=z[1],ne=function(V){var _=V.which,W=a.current instanceof HTMLTextAreaElement;!W&&u&&(_===y.UP||_===y.DOWN)&&V.preventDefault(),I&&I(V),_===y.ENTER&&c==="tags"&&!r.current&&!u&&(D==null||D(V.target.value)),!(W&&!u&&~[y.UP,y.DOWN,y.LEFT,y.RIGHT].indexOf(_))&&Mt(_)&&S(!0)},H=function(){Z(!0)},j=t.useRef(null),te=function(V){l(V,!0,r.current)!==!1&&S(!0)},q=function(){r.current=!0},B=function(V){r.current=!1,c!=="combobox"&&te(V.target.value)},K=function(V){var _=V.target.value;if(m&&j.current&&/[\r\n]/.test(j.current)){var W=j.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");_=_.replace(W,j.current)}j.current=null,te(_)},G=function(V){var _=V.clipboardData,W=_==null?void 0:_.getData("text");j.current=W||""},F=function(V){var _=V.target;if(_!==a.current){var W=document.body.style.msTouchAction!==void 0;W?setTimeout(function(){a.current.focus()}):a.current.focus()}},ee=function(V){var _=P();V.target!==a.current&&!_&&!(c==="combobox"&&s)&&V.preventDefault(),(c!=="combobox"&&(!v||!_)||!u)&&(u&&M!==!1&&l("",!0,!1),S())},Y={inputRef:a,onInputKeyDown:ne,onInputMouseDown:H,onInputChange:K,onInputPaste:G,onInputCompositionStart:q,onInputCompositionEnd:B},X=c==="multiple"||c==="tags"?t.createElement(Ft,ze({},e,Y)):t.createElement(kt,ze({},e,Y));return t.createElement("div",{ref:A,className:"".concat(i,"-selector"),onClick:F,onMouseDown:ee},g&&t.createElement("div",{className:"".concat(i,"-prefix")},g),X)},$t=t.forwardRef(Kt),zt=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],Bt=function(e){var o=e===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:o,adjustY:1},htmlRegion:"scroll"}}},Wt=function(e,o){var a=e.prefixCls;e.disabled;var r=e.visible,i=e.children,u=e.popupElement,c=e.animation,v=e.transitionName,m=e.dropdownStyle,s=e.dropdownClassName,g=e.direction,M=g===void 0?"ltr":g,l=e.placement,D=e.builtinPlacements,S=e.dropdownMatchSelectWidth,I=e.dropdownRender,A=e.dropdownAlign,re=e.getPopupContainer,z=e.empty,P=e.getTriggerDOMNode,Z=e.onPopupVisibleChange,ne=e.onPopupMouseEnter,H=en(e,zt),j="".concat(a,"-dropdown"),te=u;I&&(te=I(u));var q=t.useMemo(function(){return D||Bt(S)},[D,S]),B=c?"".concat(j,"-").concat(c):v,K=typeof S=="number",G=t.useMemo(function(){return K?null:S===!1?"minWidth":"width"},[S,K]),F=m;K&&(F=Q(Q({},F),{},{width:S}));var ee=t.useRef(null);return t.useImperativeHandle(o,function(){return{getPopupElement:function(){var X;return(X=ee.current)===null||X===void 0?void 0:X.popupElement}}}),t.createElement(It,ze({},H,{showAction:Z?["click"]:[],hideAction:Z?["click"]:[],popupPlacement:l||(M==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:q,prefixCls:j,popupTransitionName:B,popup:t.createElement("div",{onMouseEnter:ne},te),ref:ee,stretch:G,popupAlign:A,popupVisible:r,getPopupContainer:re,popupClassName:Ue(s,ie({},"".concat(j,"-empty"),z)),popupStyle:F,getTriggerDOMNode:P,onPopupVisibleChange:Z}),i)},Ut=t.forwardRef(Wt);function kn(n,e){var o=n.key,a;return"value"in n&&(a=n.value),o??(a!==void 0?a:"rc-index-key-".concat(e))}function xn(n){return typeof n<"u"&&!Number.isNaN(n)}function Gn(n,e){var o=n||{},a=o.label,r=o.value,i=o.options,u=o.groupLabel,c=a||(e?"children":"label");return{label:c,value:r||"value",options:i||"options",groupLabel:u||c}}function Ht(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e.fieldNames,a=e.childrenAsData,r=[],i=Gn(o,!1),u=i.label,c=i.value,v=i.options,m=i.groupLabel;function s(g,M){Array.isArray(g)&&g.forEach(function(l){if(M||!(v in l)){var D=l[c];r.push({key:kn(l,r.length),groupOption:M,data:l,label:l[u],value:D})}else{var S=l[m];S===void 0&&a&&(S=l.label),r.push({key:kn(l,r.length),group:!0,data:l,label:S}),s(l[v],!0)}})}return s(n,!1),r}function Dn(n){var e=Q({},n);return"props"in e||Object.defineProperty(e,"props",{get:function(){return vt(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),e}}),e}var jt=function(e,o,a){if(!o||!o.length)return null;var r=!1,i=function c(v,m){var s=yt(m),g=s[0],M=s.slice(1);if(!g)return[v];var l=v.split(g);return r=r||l.length>1,l.reduce(function(D,S){return[].concat(Ie(D),Ie(c(S,M)))},[]).filter(Boolean)},u=i(e,o);return r?typeof a<"u"?u.slice(0,a):u:null},Mn=t.createContext(null);function Gt(n){var e=n.visible,o=n.values;if(!e)return null;var a=50;return t.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(o.slice(0,a).map(function(r){var i=r.label,u=r.value;return["number","string"].includes(pn(i))?i:u}).join(", ")),o.length>a?", ...":null)}var Yt=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],Xt=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],On=function(e){return e==="tags"||e==="multiple"},Jt=t.forwardRef(function(n,e){var o,a=n.id,r=n.prefixCls,i=n.className,u=n.showSearch,c=n.tagRender,v=n.direction,m=n.omitDomProps,s=n.displayValues,g=n.onDisplayValuesChange,M=n.emptyOptions,l=n.notFoundContent,D=l===void 0?"Not Found":l,S=n.onClear,I=n.mode,A=n.disabled,re=n.loading,z=n.getInputElement,P=n.getRawInputElement,Z=n.open,ne=n.defaultOpen,H=n.onDropdownVisibleChange,j=n.activeValue,te=n.onActiveValueChange,q=n.activeDescendantId,B=n.searchValue,K=n.autoClearSearchValue,G=n.onSearch,F=n.onSearchSplit,ee=n.tokenSeparators,Y=n.allowClear,X=n.prefix,x=n.suffixIcon,V=n.clearIcon,_=n.OptionList,W=n.animation,Ae=n.transitionName,Ee=n.dropdownStyle,ae=n.dropdownClassName,fe=n.dropdownMatchSelectWidth,He=n.dropdownRender,oe=n.dropdownAlign,Fe=n.placement,Pe=n.builtinPlacements,ve=n.getPopupContainer,E=n.showAction,f=E===void 0?[]:E,C=n.onFocus,O=n.onBlur,h=n.onKeyUp,L=n.onKeyDown,$=n.onMouseDown,J=en(n,Yt),k=On(I),pe=(u!==void 0?u:k)||I==="combobox",Re=Q({},J);Xt.forEach(function(N){delete Re[N]}),m==null||m.forEach(function(N){delete Re[N]});var ke=t.useState(!1),Ne=ue(ke,2),se=Ne[0],Je=Ne[1];t.useEffect(function(){Je(mt())},[]);var je=t.useRef(null),me=t.useRef(null),he=t.useRef(null),be=t.useRef(null),Ce=t.useRef(null),xe=t.useRef(!1),nn=Dt(),Te=ue(nn,3),Ve=Te[0],De=Te[1],bn=Te[2];t.useImperativeHandle(e,function(){var N,R;return{focus:(N=be.current)===null||N===void 0?void 0:N.focus,blur:(R=be.current)===null||R===void 0?void 0:R.blur,scrollTo:function(we){var ce;return(ce=Ce.current)===null||ce===void 0?void 0:ce.scrollTo(we)},nativeElement:je.current||me.current}});var Oe=t.useMemo(function(){var N;if(I!=="combobox")return B;var R=(N=s[0])===null||N===void 0?void 0:N.value;return typeof R=="string"||typeof R=="number"?String(R):""},[B,I,s]),un=I==="combobox"&&typeof z=="function"&&z()||null,ye=typeof P=="function"&&P(),Sn=gt(me,ye==null||(o=ye.props)===null||o===void 0?void 0:o.ref),ln=t.useState(!1),cn=ue(ln,2),wn=cn[0],sn=cn[1];pt(function(){sn(!0)},[]);var fn=Rn(!1,{defaultValue:ne,value:Z}),Ge=ue(fn,2),tn=Ge[0],an=Ge[1],le=wn?tn:!1,dn=!D&&M;(A||dn&&le&&I==="combobox")&&(le=!1);var Qe=dn?!1:le,d=t.useCallback(function(N){var R=N!==void 0?N:!le;A||(an(R),le!==R&&(H==null||H(R)))},[A,le,an,H]),w=t.useMemo(function(){return(ee||[]).some(function(N){return[`
`,`\r
`].includes(N)})},[ee]),p=t.useContext(Mn)||{},b=p.maxCount,T=p.rawValues,U=function(R,Se,we){if(!(k&&xn(b)&&(T==null?void 0:T.size)>=b)){var ce=!0,ge=R;te==null||te(null);var $e=jt(R,ee,xn(b)?b-T.size:void 0),Le=we?null:$e;return I!=="combobox"&&Le&&(ge="",F==null||F(Le),d(!1),ce=!1),G&&Oe!==ge&&G(ge,{source:Se?"typing":"effect"}),ce}},Ke=function(R){!R||!R.trim()||G(R,{source:"submit"})};t.useEffect(function(){!le&&!k&&I!=="combobox"&&U("",!1,!1)},[le]),t.useEffect(function(){tn&&A&&an(!1),A&&!xe.current&&De(!1)},[A]);var _e=Wn(),Be=ue(_e,2),de=Be[0],We=Be[1],on=t.useRef(!1),Cn=function(R){var Se=de(),we=R.key,ce=we==="Enter";if(ce&&(I!=="combobox"&&R.preventDefault(),le||d(!0)),We(!!Oe),we==="Backspace"&&!Se&&k&&!Oe&&s.length){for(var ge=Ie(s),$e=null,Le=ge.length-1;Le>=0;Le-=1){var Ye=ge[Le];if(!Ye.disabled){ge.splice(Le,1),$e=Ye;break}}$e&&g(ge,{type:"remove",values:[$e]})}for(var Ze=arguments.length,Xe=new Array(Ze>1?Ze-1:0),vn=1;vn<Ze;vn++)Xe[vn-1]=arguments[vn];if(le&&(!ce||!on.current)){var mn;(mn=Ce.current)===null||mn===void 0||mn.onKeyDown.apply(mn,[R].concat(Xe))}ce&&(on.current=!0),L==null||L.apply(void 0,[R].concat(Xe))},Pn=function(R){for(var Se=arguments.length,we=new Array(Se>1?Se-1:0),ce=1;ce<Se;ce++)we[ce-1]=arguments[ce];if(le){var ge;(ge=Ce.current)===null||ge===void 0||ge.onKeyUp.apply(ge,[R].concat(we))}R.key==="Enter"&&(on.current=!1),h==null||h.apply(void 0,[R].concat(we))},rn=function(R){var Se=s.filter(function(we){return we!==R});g(Se,{type:"remove",values:[R]})},Me=t.useRef(!1),qn=function(){De(!0),A||(C&&!Me.current&&C.apply(void 0,arguments),f.includes("focus")&&d(!0)),Me.current=!0},Zn=function(){xe.current=!0,De(!1,function(){Me.current=!1,xe.current=!1,d(!1)}),!A&&(Oe&&(I==="tags"?G(Oe,{source:"submit"}):I==="multiple"&&G("",{source:"blur"})),O&&O.apply(void 0,arguments))},qe=[];t.useEffect(function(){return function(){qe.forEach(function(N){return clearTimeout(N)}),qe.splice(0,qe.length)}},[]);var et=function(R){var Se,we=R.target,ce=(Se=he.current)===null||Se===void 0?void 0:Se.getPopupElement();if(ce&&ce.contains(we)){var ge=setTimeout(function(){var Ze=qe.indexOf(ge);if(Ze!==-1&&qe.splice(Ze,1),bn(),!se&&!ce.contains(document.activeElement)){var Xe;(Xe=be.current)===null||Xe===void 0||Xe.focus()}});qe.push(ge)}for(var $e=arguments.length,Le=new Array($e>1?$e-1:0),Ye=1;Ye<$e;Ye++)Le[Ye-1]=arguments[Ye];$==null||$.apply(void 0,[R].concat(Le))},nt=t.useState({}),tt=ue(nt,2),at=tt[1];function ot(){at({})}var Nn;ye&&(Nn=function(R){d(R)}),Ot(function(){var N;return[je.current,(N=he.current)===null||N===void 0?void 0:N.getPopupElement()]},Qe,d,!!ye);var rt=t.useMemo(function(){return Q(Q({},n),{},{notFoundContent:D,open:le,triggerOpen:Qe,id:a,showSearch:pe,multiple:k,toggleOpen:d})},[n,D,Qe,le,a,pe,k,d]),Tn=!!x||re,Vn;Tn&&(Vn=t.createElement(hn,{className:Ue("".concat(r,"-arrow"),ie({},"".concat(r,"-arrow-loading"),re)),customizeIcon:x,customizeIconProps:{loading:re,searchValue:Oe,open:le,focused:Ve,showSearch:pe}}));var it=function(){var R;S==null||S(),(R=be.current)===null||R===void 0||R.focus(),g([],{type:"clear",values:s}),U("",!1,!1)},_n=Rt(r,it,s,Y,V,A,Oe,I),ut=_n.allowClear,lt=_n.clearIcon,ct=t.createElement(_,{ref:Ce}),st=Ue(r,i,ie(ie(ie(ie(ie(ie(ie(ie(ie(ie({},"".concat(r,"-focused"),Ve),"".concat(r,"-multiple"),k),"".concat(r,"-single"),!k),"".concat(r,"-allow-clear"),Y),"".concat(r,"-show-arrow"),Tn),"".concat(r,"-disabled"),A),"".concat(r,"-loading"),re),"".concat(r,"-open"),le),"".concat(r,"-customize-input"),un),"".concat(r,"-show-search"),pe)),Ln=t.createElement(Ut,{ref:he,disabled:A,prefixCls:r,visible:Qe,popupElement:ct,animation:W,transitionName:Ae,dropdownStyle:Ee,dropdownClassName:ae,direction:v,dropdownMatchSelectWidth:fe,dropdownRender:He,dropdownAlign:oe,placement:Fe,builtinPlacements:Pe,getPopupContainer:ve,empty:M,getTriggerDOMNode:function(R){return me.current||R},onPopupVisibleChange:Nn,onPopupMouseEnter:ot},ye?t.cloneElement(ye,{ref:Sn}):t.createElement($t,ze({},n,{domRef:me,prefixCls:r,inputElement:un,ref:be,id:a,prefix:X,showSearch:pe,autoClearSearchValue:K,mode:I,activeDescendantId:q,tagRender:c,values:s,open:le,onToggleOpen:d,activeValue:j,searchValue:Oe,onSearch:U,onSearchSubmit:Ke,onRemove:rn,tokenWithEnter:w}))),yn;return ye?yn=Ln:yn=t.createElement("div",ze({className:st},Re,{ref:je,onMouseDown:et,onKeyDown:Cn,onKeyUp:Pn,onFocus:qn,onBlur:Zn}),t.createElement(Gt,{visible:Ve&&!le,values:s}),Ln,Vn,ut&&lt),t.createElement(Bn.Provider,{value:rt},yn)}),Yn=function(){return null};Yn.isSelectOptGroup=!0;var Xn=function(){return null};Xn.isSelectOption=!0;function Qt(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var qt=["disabled","title","children","style","className"];function Kn(n){return typeof n=="string"||typeof n=="number"}var Zt=function(e,o){var a=xt(),r=a.prefixCls,i=a.id,u=a.open,c=a.multiple,v=a.mode,m=a.searchValue,s=a.toggleOpen,g=a.notFoundContent,M=a.onPopupScroll,l=t.useContext(Mn),D=l.maxCount,S=l.flattenOptions,I=l.onActiveValue,A=l.defaultActiveFirstOption,re=l.onSelect,z=l.menuItemSelectedIcon,P=l.rawValues,Z=l.fieldNames,ne=l.virtual,H=l.direction,j=l.listHeight,te=l.listItemHeight,q=l.optionRender,B="".concat(r,"-item"),K=ht(function(){return S},[u,S],function(E,f){return f[0]&&E[1]!==f[1]}),G=t.useRef(null),F=t.useMemo(function(){return c&&xn(D)&&(P==null?void 0:P.size)>=D},[c,D,P==null?void 0:P.size]),ee=function(f){f.preventDefault()},Y=function(f){var C;(C=G.current)===null||C===void 0||C.scrollTo(typeof f=="number"?{index:f}:f)},X=t.useCallback(function(E){return v==="combobox"?!1:P.has(E)},[v,Ie(P).toString(),P.size]),x=function(f){for(var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,O=K.length,h=0;h<O;h+=1){var L=(f+h*C+O)%O,$=K[L]||{},J=$.group,k=$.data;if(!J&&!(k!=null&&k.disabled)&&(X(k.value)||!F))return L}return-1},V=t.useState(function(){return x(0)}),_=ue(V,2),W=_[0],Ae=_[1],Ee=function(f){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ae(f);var O={source:C?"keyboard":"mouse"},h=K[f];if(!h){I(null,-1,O);return}I(h.value,f,O)};t.useEffect(function(){Ee(A!==!1?x(0):-1)},[K.length,m]);var ae=t.useCallback(function(E){return v==="combobox"?String(E).toLowerCase()===m.toLowerCase():P.has(E)},[v,m,Ie(P).toString(),P.size]);t.useEffect(function(){var E=setTimeout(function(){if(!c&&u&&P.size===1){var C=Array.from(P)[0],O=K.findIndex(function(h){var L=h.data;return L.value===C});O!==-1&&(Ee(O),Y(O))}});if(u){var f;(f=G.current)===null||f===void 0||f.scrollTo(void 0)}return function(){return clearTimeout(E)}},[u,m]);var fe=function(f){f!==void 0&&re(f,{selected:!P.has(f)}),c||s(!1)};if(t.useImperativeHandle(o,function(){return{onKeyDown:function(f){var C=f.which,O=f.ctrlKey;switch(C){case y.N:case y.P:case y.UP:case y.DOWN:{var h=0;if(C===y.UP?h=-1:C===y.DOWN?h=1:Qt()&&O&&(C===y.N?h=1:C===y.P&&(h=-1)),h!==0){var L=x(W+h,h);Y(L),Ee(L,!0)}break}case y.TAB:case y.ENTER:{var $,J=K[W];J&&!(J!=null&&($=J.data)!==null&&$!==void 0&&$.disabled)&&!F?fe(J.value):fe(void 0),u&&f.preventDefault();break}case y.ESC:s(!1),u&&f.stopPropagation()}},onKeyUp:function(){},scrollTo:function(f){Y(f)}}}),K.length===0)return t.createElement("div",{role:"listbox",id:"".concat(i,"_list"),className:"".concat(B,"-empty"),onMouseDown:ee},g);var He=Object.keys(Z).map(function(E){return Z[E]}),oe=function(f){return f.label};function Fe(E,f){var C=E.group;return{role:C?"presentation":"option",id:"".concat(i,"_list_").concat(f)}}var Pe=function(f){var C=K[f];if(!C)return null;var O=C.data||{},h=O.value,L=C.group,$=gn(O,!0),J=oe(C);return C?t.createElement("div",ze({"aria-label":typeof J=="string"&&!L?J:null},$,{key:f},Fe(C,f),{"aria-selected":ae(h)}),h):null},ve={role:"listbox",id:"".concat(i,"_list")};return t.createElement(t.Fragment,null,ne&&t.createElement("div",ze({},ve,{style:{height:0,width:0,overflow:"hidden"}}),Pe(W-1),Pe(W),Pe(W+1)),t.createElement(Et,{itemKey:"key",ref:G,data:K,height:j,itemHeight:te,fullHeight:!1,onMouseDown:ee,onScroll:M,virtual:ne,direction:H,innerProps:ne?null:ve},function(E,f){var C=E.group,O=E.groupOption,h=E.data,L=E.label,$=E.value,J=h.key;if(C){var k,pe=(k=h.title)!==null&&k!==void 0?k:Kn(L)?L.toString():void 0;return t.createElement("div",{className:Ue(B,"".concat(B,"-group"),h.className),title:pe},L!==void 0?L:J)}var Re=h.disabled,ke=h.title;h.children;var Ne=h.style,se=h.className,Je=en(h,qt),je=bt(Je,He),me=X($),he=Re||!me&&F,be="".concat(B,"-option"),Ce=Ue(B,be,se,ie(ie(ie(ie({},"".concat(be,"-grouped"),O),"".concat(be,"-active"),W===f&&!he),"".concat(be,"-disabled"),he),"".concat(be,"-selected"),me)),xe=oe(E),nn=!z||typeof z=="function"||me,Te=typeof xe=="number"?xe:xe||$,Ve=Kn(Te)?Te.toString():void 0;return ke!==void 0&&(Ve=ke),t.createElement("div",ze({},gn(je),ne?{}:Fe(E,f),{"aria-selected":ae($),className:Ce,title:Ve,onMouseMove:function(){W===f||he||Ee(f)},onClick:function(){he||fe($)},style:Ne}),t.createElement("div",{className:"".concat(be,"-content")},typeof q=="function"?q(E,{index:f}):Te),t.isValidElement(z)||me,nn&&t.createElement(hn,{className:"".concat(B,"-option-state"),customizeIcon:z,customizeIconProps:{value:$,disabled:he,isSelected:me}},me?"✓":null))}))},ea=t.forwardRef(Zt);const na=function(n,e){var o=t.useRef({values:new Map,options:new Map}),a=t.useMemo(function(){var i=o.current,u=i.values,c=i.options,v=n.map(function(g){if(g.label===void 0){var M;return Q(Q({},g),{},{label:(M=u.get(g.value))===null||M===void 0?void 0:M.label})}return g}),m=new Map,s=new Map;return v.forEach(function(g){m.set(g.value,g),s.set(g.value,e.get(g.value)||c.get(g.value))}),o.current.values=m,o.current.options=s,v},[n,e]),r=t.useCallback(function(i){return e.get(i)||o.current.options.get(i)},[e]);return[a,r]};function En(n,e){return Hn(n).join("").toUpperCase().includes(e)}const ta=function(n,e,o,a,r){return t.useMemo(function(){if(!o||a===!1)return n;var i=e.options,u=e.label,c=e.value,v=[],m=typeof a=="function",s=o.toUpperCase(),g=m?a:function(l,D){return r?En(D[r],s):D[i]?En(D[u!=="children"?u:"label"],s):En(D[c],s)},M=m?function(l){return Dn(l)}:function(l){return l};return n.forEach(function(l){if(l[i]){var D=g(o,M(l));if(D)v.push(l);else{var S=l[i].filter(function(I){return g(o,M(I))});S.length&&v.push(Q(Q({},l),{},ie({},i,S)))}return}g(o,M(l))&&v.push(l)}),v},[n,a,r,o,e])};var $n=0,aa=St();function oa(){var n;return aa?(n=$n,$n+=1):n="TEST_OR_SSR",n}function ra(n){var e=t.useState(),o=ue(e,2),a=o[0],r=o[1];return t.useEffect(function(){r("rc_select_".concat(oa()))},[]),n||a}var ia=["children","value"],ua=["children"];function la(n){var e=n,o=e.key,a=e.props,r=a.children,i=a.value,u=en(a,ia);return Q({key:o,value:i!==void 0?i:o,children:r},u)}function Jn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return wt(n).map(function(o,a){if(!t.isValidElement(o)||!o.type)return null;var r=o,i=r.type.isSelectOptGroup,u=r.key,c=r.props,v=c.children,m=en(c,ua);return e||!i?la(o):Q(Q({key:"__RC_SELECT_GRP__".concat(u===null?a:u,"__"),label:u},m),{},{options:Jn(v)})}).filter(function(o){return o})}var ca=function(e,o,a,r,i){return t.useMemo(function(){var u=e,c=!e;c&&(u=Jn(o));var v=new Map,m=new Map,s=function(l,D,S){S&&typeof S=="string"&&l.set(D[S],D)},g=function M(l){for(var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,S=0;S<l.length;S+=1){var I=l[S];!I[a.options]||D?(v.set(I[a.value],I),s(m,I,a.label),s(m,I,r),s(m,I,i)):M(I[a.options],!0)}};return g(u),{options:u,valueOptions:v,labelOptions:m}},[e,o,a,r,i])};function zn(n){var e=t.useRef();e.current=n;var o=t.useCallback(function(){return e.current.apply(e,arguments)},[]);return o}var sa=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],fa=["inputValue"];function da(n){return!n||pn(n)!=="object"}var va=t.forwardRef(function(n,e){var o=n.id,a=n.mode,r=n.prefixCls,i=r===void 0?"rc-select":r,u=n.backfill,c=n.fieldNames,v=n.inputValue,m=n.searchValue,s=n.onSearch,g=n.autoClearSearchValue,M=g===void 0?!0:g,l=n.onSelect,D=n.onDeselect,S=n.dropdownMatchSelectWidth,I=S===void 0?!0:S,A=n.filterOption,re=n.filterSort,z=n.optionFilterProp,P=n.optionLabelProp,Z=n.options,ne=n.optionRender,H=n.children,j=n.defaultActiveFirstOption,te=n.menuItemSelectedIcon,q=n.virtual,B=n.direction,K=n.listHeight,G=K===void 0?200:K,F=n.listItemHeight,ee=F===void 0?20:F,Y=n.labelRender,X=n.value,x=n.defaultValue,V=n.labelInValue,_=n.onChange,W=n.maxCount,Ae=en(n,sa),Ee=ra(o),ae=On(a),fe=!!(!Z&&H),He=t.useMemo(function(){return A===void 0&&a==="combobox"?!1:A},[A,a]),oe=t.useMemo(function(){return Gn(c,fe)},[JSON.stringify(c),fe]),Fe=Rn("",{value:m!==void 0?m:v,postState:function(w){return w||""}}),Pe=ue(Fe,2),ve=Pe[0],E=Pe[1],f=ca(Z,H,oe,z,P),C=f.valueOptions,O=f.labelOptions,h=f.options,L=t.useCallback(function(d){var w=Hn(d);return w.map(function(p){var b,T,U,Ke,_e;if(da(p))b=p;else{var Be;U=p.key,T=p.label,b=(Be=p.value)!==null&&Be!==void 0?Be:U}var de=C.get(b);if(de){var We;T===void 0&&(T=de==null?void 0:de[P||oe.label]),U===void 0&&(U=(We=de==null?void 0:de.key)!==null&&We!==void 0?We:b),Ke=de==null?void 0:de.disabled,_e=de==null?void 0:de.title}return{label:T,value:b,key:U,disabled:Ke,title:_e}})},[oe,P,C]),$=Rn(x,{value:X}),J=ue($,2),k=J[0],pe=J[1],Re=t.useMemo(function(){var d,w=ae&&k===null?[]:k,p=L(w);return a==="combobox"&&_t((d=p[0])===null||d===void 0?void 0:d.value)?[]:p},[k,L,a,ae]),ke=na(Re,C),Ne=ue(ke,2),se=Ne[0],Je=Ne[1],je=t.useMemo(function(){if(!a&&se.length===1){var d=se[0];if(d.value===null&&(d.label===null||d.label===void 0))return[]}return se.map(function(w){var p;return Q(Q({},w),{},{label:(p=typeof Y=="function"?Y(w):w.label)!==null&&p!==void 0?p:w.value})})},[a,se,Y]),me=t.useMemo(function(){return new Set(se.map(function(d){return d.value}))},[se]);t.useEffect(function(){if(a==="combobox"){var d,w=(d=se[0])===null||d===void 0?void 0:d.value;E(Vt(w)?String(w):"")}},[se]);var he=zn(function(d,w){var p=w??d;return ie(ie({},oe.value,d),oe.label,p)}),be=t.useMemo(function(){if(a!=="tags")return h;var d=Ie(h),w=function(b){return C.has(b)};return Ie(se).sort(function(p,b){return p.value<b.value?-1:1}).forEach(function(p){var b=p.value;w(b)||d.push(he(b,p.label))}),d},[he,h,C,se,a]),Ce=ta(be,oe,ve,He,z),xe=t.useMemo(function(){return a!=="tags"||!ve||Ce.some(function(d){return d[z||"value"]===ve})||Ce.some(function(d){return d[oe.value]===ve})?Ce:[he(ve)].concat(Ie(Ce))},[he,z,a,Ce,ve,oe]),nn=function d(w){var p=Ie(w).sort(function(b,T){return re(b,T,{searchValue:ve})});return p.map(function(b){return Array.isArray(b.options)?Q(Q({},b),{},{options:b.options.length>0?d(b.options):b.options}):b})},Te=t.useMemo(function(){return re?nn(xe):xe},[xe,re,ve]),Ve=t.useMemo(function(){return Ht(Te,{fieldNames:oe,childrenAsData:fe})},[Te,oe,fe]),De=function(w){var p=L(w);if(pe(p),_&&(p.length!==se.length||p.some(function(U,Ke){var _e;return((_e=se[Ke])===null||_e===void 0?void 0:_e.value)!==(U==null?void 0:U.value)}))){var b=V?p:p.map(function(U){return U.value}),T=p.map(function(U){return Dn(Je(U.value))});_(ae?b:b[0],ae?T:T[0])}},bn=t.useState(null),Oe=ue(bn,2),un=Oe[0],ye=Oe[1],Sn=t.useState(0),ln=ue(Sn,2),cn=ln[0],wn=ln[1],sn=j!==void 0?j:a!=="combobox",fn=t.useCallback(function(d,w){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},b=p.source,T=b===void 0?"keyboard":b;wn(w),u&&a==="combobox"&&d!==null&&T==="keyboard"&&ye(String(d))},[u,a]),Ge=function(w,p,b){var T=function(){var rn,Me=Je(w);return[V?{label:Me==null?void 0:Me[oe.label],value:w,key:(rn=Me==null?void 0:Me.key)!==null&&rn!==void 0?rn:w}:w,Dn(Me)]};if(p&&l){var U=T(),Ke=ue(U,2),_e=Ke[0],Be=Ke[1];l(_e,Be)}else if(!p&&D&&b!=="clear"){var de=T(),We=ue(de,2),on=We[0],Cn=We[1];D(on,Cn)}},tn=zn(function(d,w){var p,b=ae?w.selected:!0;b?p=ae?[].concat(Ie(se),[d]):[d]:p=se.filter(function(T){return T.value!==d}),De(p),Ge(d,b),a==="combobox"?ye(""):(!On||M)&&(E(""),ye(""))}),an=function(w,p){De(w);var b=p.type,T=p.values;(b==="remove"||b==="clear")&&T.forEach(function(U){Ge(U.value,!1,b)})},le=function(w,p){if(E(w),ye(null),p.source==="submit"){var b=(w||"").trim();if(b){var T=Array.from(new Set([].concat(Ie(me),[b])));De(T),Ge(b,!0),E("")}return}p.source!=="blur"&&(a==="combobox"&&De(w),s==null||s(w))},dn=function(w){var p=w;a!=="tags"&&(p=w.map(function(T){var U=O.get(T);return U==null?void 0:U.value}).filter(function(T){return T!==void 0}));var b=Array.from(new Set([].concat(Ie(me),Ie(p))));De(b),b.forEach(function(T){Ge(T,!0)})},Qe=t.useMemo(function(){var d=q!==!1&&I!==!1;return Q(Q({},f),{},{flattenOptions:Ve,onActiveValue:fn,defaultActiveFirstOption:sn,onSelect:tn,menuItemSelectedIcon:te,rawValues:me,fieldNames:oe,virtual:d,direction:B,listHeight:G,listItemHeight:ee,childrenAsData:fe,maxCount:W,optionRender:ne})},[W,f,Ve,fn,sn,tn,te,me,oe,q,I,B,G,ee,fe,ne]);return t.createElement(Mn.Provider,{value:Qe},t.createElement(Jt,ze({},Ae,{id:Ee,prefixCls:i,ref:e,omitDomProps:fa,mode:a,displayValues:je,onDisplayValuesChange:an,direction:B,searchValue:ve,onSearch:le,autoClearSearchValue:M,onSearchSplit:dn,dropdownMatchSelectWidth:I,OptionList:ea,emptyOptions:!Ve.length,activeValue:un,activeDescendantId:"".concat(Ee,"_list_").concat(cn)})))}),Qn=va;Qn.Option=Xn;Qn.OptGroup=Yn;export{Jt as B,Xn as O,Qn as T,Yn as a,ra as b,xt as u};
