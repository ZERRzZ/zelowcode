import{d as P,f as _}from"./@babel-D91nw8a6.js";import"./react-jFU0esu9.js";import{b}from"./rc-util-BGVI6VDl.js";import"./classnames-ixCMRz17.js";import"./rc-motion-BS5OivOI.js";import"./rc-virtual-list-Bs7hgjzb.js";function A(f,e){return f[e]}function F(f,e){return"".concat(f,"-").concat(e)}function C(f,e){return f??e}function G(f){var e=f||{},c=e.title,i=e._title,a=e.key,u=e.children,d=c||"title";return{title:d,_title:i||[d],key:a||"key",children:u||"children"}}function j(f,e,c){var i={};P(c)==="object"?i=c:i={externalGetKey:c},i=i||{};var a=i,u=a.childrenPropName,d=a.externalGetKey,k=a.fieldNames,v=G(k),y=v.key,h=v.children,s=u||h,r;d?typeof d=="string"?r=function(l){return l[d]}:typeof d=="function"&&(r=function(l){return d(l)}):r=function(l,t){return C(l[y],t)};function n(o,l,t,p){var K=o?o[s]:f,g=o?F(t.pos,l):"0",w=o?[].concat(_(p),[o]):[];if(o){var m=r(o,g),E={node:o,index:l,pos:g,key:m,parentPos:t.node?t.pos:null,level:t.level+1,nodes:w};e(E)}K&&K.forEach(function(S,x){n(S,x,{node:o,pos:g,level:t?t.level+1:-1},w)})}n(null)}function I(f){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=e.initWrapper,i=e.processEntity,a=e.onProcessFinished,u=e.externalGetKey,d=e.childrenPropName,k=e.fieldNames,v=arguments.length>2?arguments[2]:void 0,y=u||v,h={},s={},r={posEntities:h,keyEntities:s};return c&&(r=c(r)||r),j(f,function(n){var o=n.node,l=n.index,t=n.pos,p=n.key,K=n.parentPos,g=n.level,w=n.nodes,m={node:o,nodes:w,index:l,key:p,pos:t,level:g},E=C(p,t);h[t]=m,s[E]=m,m.parent=h[K],m.parent&&(m.parent.children=m.parent.children||[],m.parent.children.push(m)),i&&i(m,r)},{externalGetKey:y,childrenPropName:d,fieldNames:k}),a&&a(r),r}function N(f,e){var c=new Set;return f.forEach(function(i){e.has(i)||c.add(i)}),c}function M(f){var e=f||{},c=e.disabled,i=e.disableCheckbox,a=e.checkable;return!!(c||i)||a===!1}function T(f,e,c,i){for(var a=new Set(f),u=new Set,d=0;d<=c;d+=1){var k=e.get(d)||new Set;k.forEach(function(s){var r=s.key,n=s.node,o=s.children,l=o===void 0?[]:o;a.has(r)&&!i(n)&&l.filter(function(t){return!i(t.node)}).forEach(function(t){a.add(t.key)})})}for(var v=new Set,y=c;y>=0;y-=1){var h=e.get(y)||new Set;h.forEach(function(s){var r=s.parent,n=s.node;if(!(i(n)||!s.parent||v.has(s.parent.key))){if(i(s.parent.node)){v.add(r.key);return}var o=!0,l=!1;(r.children||[]).filter(function(t){return!i(t.node)}).forEach(function(t){var p=t.key,K=a.has(p);o&&!K&&(o=!1),!l&&(K||u.has(p))&&(l=!0)}),o&&a.add(r.key),l&&u.add(r.key),v.add(r.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(N(u,a))}}function O(f,e,c,i,a){for(var u=new Set(f),d=new Set(e),k=0;k<=i;k+=1){var v=c.get(k)||new Set;v.forEach(function(r){var n=r.key,o=r.node,l=r.children,t=l===void 0?[]:l;!u.has(n)&&!d.has(n)&&!a(o)&&t.filter(function(p){return!a(p.node)}).forEach(function(p){u.delete(p.key)})})}d=new Set;for(var y=new Set,h=i;h>=0;h-=1){var s=c.get(h)||new Set;s.forEach(function(r){var n=r.parent,o=r.node;if(!(a(o)||!r.parent||y.has(r.parent.key))){if(a(r.parent.node)){y.add(n.key);return}var l=!0,t=!1;(n.children||[]).filter(function(p){return!a(p.node)}).forEach(function(p){var K=p.key,g=u.has(K);l&&!g&&(l=!1),!t&&(g||d.has(K))&&(t=!0)}),l||u.delete(n.key),t&&d.add(n.key),y.add(n.key)}})}return{checkedKeys:Array.from(u),halfCheckedKeys:Array.from(N(d,u))}}function J(f,e,c,i){var a=[],u;u=M;var d=new Set(f.filter(function(h){var s=!!A(c,h);return s||a.push(h),s})),k=new Map,v=0;Object.keys(c).forEach(function(h){var s=c[h],r=s.level,n=k.get(r);n||(n=new Set,k.set(r,n)),n.add(s),v=Math.max(v,r)}),b(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(h){return"'".concat(h,"'")}).join(", ")));var y;return e===!0?y=T(d,k,v,u):y=O(d,e.halfCheckedKeys,k,v,u),y}export{J as a,I as c};
