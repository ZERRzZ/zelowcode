import{K as le,e as De,d as ye}from"./rc-util-BGVI6VDl.js";import{f as ae,e as oe,b as F,d as We,c as Q,g as Ae,k as hn}from"./@babel-D91nw8a6.js";import{u as pn,b as mn,B as gn}from"./rc-select-BDPW5iLI.js";import{r as o}from"./react-jFU0esu9.js";import{c as Cn,a as Le}from"./rc-tree-D5O0fmFe.js";import{c as Oe}from"./classnames-ixCMRz17.js";import"./react-is-CX4zgkE_.js";import"./rc-overflow-hCo2P9PI.js";import"./react-dom-Dl7ImxMp.js";import"./rc-resize-observer-CUhI3ncJ.js";import"./rc-motion-BS5OivOI.js";var ge=o.createContext({}),he="__rc_cascader_search_mark__",Sn=function(a,n,t){var r=t.label,i=r===void 0?"":r;return n.some(function(u){return String(u[i]).toLowerCase().includes(a.toLowerCase())})},bn=function(a,n,t,r){return n.map(function(i){return i[r.label]}).join(" / ")},yn=function(a,n,t,r,i,u){var l=i.filter,c=l===void 0?Sn:l,s=i.render,g=s===void 0?bn:s,h=i.limit,v=h===void 0?50:h,y=i.sort;return o.useMemo(function(){var C=[];if(!a)return[];function f(m,w){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;m.forEach(function(S){if(!(!y&&v!==!1&&v>0&&C.length>=v)){var D=[].concat(ae(w),[S]),T=S[t.children],O=A||S.disabled;if((!T||T.length===0||u)&&c(a,D,{label:t.label})){var b;C.push(oe(oe({},S),{},(b={disabled:O},F(b,t.label,g(a,D,r,t)),F(b,he,D),F(b,t.children,void 0),b)))}T&&f(S[t.children],D,O)}})}return f(n,[]),y&&C.sort(function(m,w){return y(m[he],w[he],a,t)}),v!==!1&&v>0?C.slice(0,v):C},[a,n,t,r,g,u,c,y,v])},Re="__RC_CASCADER_SPLIT__",He="SHOW_PARENT",Fe="SHOW_CHILD";function te(e){return e.join(Re)}function pe(e){return e.map(te)}function kn(e){return e.split(Re)}function Be(e){var a=e||{},n=a.label,t=a.value,r=a.children,i=t||"value";return{label:n||"label",value:i,key:i,children:r||"children"}}function be(e,a){var n,t;return(n=e.isLeaf)!==null&&n!==void 0?n:!((t=e[a.children])!==null&&t!==void 0&&t.length)}function On(e){var a=e.parentElement;if(a){var n=e.offsetTop-a.offsetTop;n-a.scrollTop<0?a.scrollTo({top:n}):n+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:n+e.offsetHeight-a.offsetHeight})}}function Ue(e,a){return e.map(function(n){var t;return(t=n[he])===null||t===void 0?void 0:t.map(function(r){return r[a.value]})})}function xn(e){return Array.isArray(e)&&Array.isArray(e[0])}function ke(e){return e?xn(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}function je(e,a,n){var t=new Set(e),r=a();return e.filter(function(i){var u=r[i],l=u?u.parent:null,c=u?u.children:null;return u&&u.node.disabled?!0:n===Fe?!(c&&c.some(function(s){return s.key&&t.has(s.key)})):!(l&&!l.node.disabled&&t.has(l.key))})}function me(e,a,n){for(var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=a,i=[],u=function(){var s,g,h,v=e[l],y=(s=r)===null||s===void 0?void 0:s.findIndex(function(f){var m=f[n.value];return t?String(m)===String(v):m===v}),C=y!==-1?(g=r)===null||g===void 0?void 0:g[y]:null;i.push({value:(h=C==null?void 0:C[n.value])!==null&&h!==void 0?h:v,index:y,option:C}),r=C==null?void 0:C[n.children]},l=0;l<e.length;l+=1)u();return i}const _n=function(e,a,n,t,r){return o.useMemo(function(){var i=r||function(u){var l=t?u.slice(-1):u,c=" / ";return l.every(function(s){return["string","number"].includes(We(s))})?l.join(c):l.reduce(function(s,g,h){var v=o.isValidElement(g)?o.cloneElement(g,{key:h}):g;return h===0?[v]:[].concat(ae(s),[c,v])},[])};return e.map(function(u){var l,c=me(u,a,n),s=i(c.map(function(h){var v,y=h.option,C=h.value;return(v=y==null?void 0:y[n.label])!==null&&v!==void 0?v:C}),c.map(function(h){var v=h.option;return v})),g=te(u);return{label:s,value:g,key:g,valueCells:u,disabled:(l=c[c.length-1])===null||l===void 0||(l=l.option)===null||l===void 0?void 0:l.disabled}})},[e,a,n,r,t])};function Je(e,a){return o.useCallback(function(n){var t=[],r=[];return n.forEach(function(i){var u=me(i,e,a);u.every(function(l){return l.option})?r.push(i):t.push(i)}),[r,t]},[e,a])}const Vn=function(e,a){var n=o.useRef({options:[],info:{keyEntities:{},pathKeyEntities:{}}}),t=o.useCallback(function(){return n.current.options!==e&&(n.current.options=e,n.current.info=Cn(e,{fieldNames:a,initWrapper:function(i){return oe(oe({},i),{},{pathKeyEntities:{}})},processEntity:function(i,u){var l=i.nodes.map(function(c){return c[a.value]}).join(Re);u.pathKeyEntities[l]=i,i.key=l}})),n.current.info.pathKeyEntities},[a,e]);return t};function Xe(e,a){var n=o.useMemo(function(){return a||[]},[a]),t=Vn(n,e),r=o.useCallback(function(i){var u=t();return i.map(function(l){var c=u[l].nodes;return c.map(function(s){return s[e.value]})})},[t,e]);return[n,t,r]}function Pn(e){return o.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&We(e)==="object"&&(a=oe(oe({},a),e)),a.limit<=0&&(a.limit=!1),[!0,a]},[e])}function qe(e,a,n,t,r,i,u,l){return function(c){if(!e)a(c);else{var s=te(c),g=pe(n),h=pe(t),v=g.includes(s),y=r.some(function(O){return te(O)===s}),C=n,f=r;if(y&&!v)f=r.filter(function(O){return te(O)!==s});else{var m=v?g.filter(function(O){return O!==s}):[].concat(ae(g),[s]),w=i(),A;if(v){var S=Le(m,{checked:!1,halfCheckedKeys:h},w);A=S.checkedKeys}else{var D=Le(m,!0,w);A=D.checkedKeys}var T=je(A,i,l);C=u(T)}a([].concat(ae(f),ae(C)))}}}function Ge(e,a,n,t,r){return o.useMemo(function(){var i=r(a),u=Q(i,2),l=u[0],c=u[1];if(!e||!a.length)return[l,[],c];var s=pe(l),g=n(),h=Le(s,!0,g),v=h.checkedKeys,y=h.halfCheckedKeys;return[t(v),t(y),c]},[e,a,n,t,r])}var En=o.memo(function(e){var a=e.children;return a},function(e,a){return!a.open});function wn(e){var a,n=e.prefixCls,t=e.checked,r=e.halfChecked,i=e.disabled,u=e.onClick,l=e.disableCheckbox,c=o.useContext(ge),s=c.checkable,g=typeof s!="boolean"?s:null;return o.createElement("span",{className:Oe("".concat(n),(a={},F(a,"".concat(n,"-checked"),t),F(a,"".concat(n,"-indeterminate"),!t&&r),F(a,"".concat(n,"-disabled"),i||l),a)),onClick:u},g)}var Ye="__cascader_fix_label__";function Mn(e){var a=e.prefixCls,n=e.multiple,t=e.options,r=e.activeValue,i=e.prevValuePath,u=e.onToggleOpen,l=e.onSelect,c=e.onActive,s=e.checkedSet,g=e.halfCheckedSet,h=e.loadingKeys,v=e.isSelectable,y=e.disabled,C="".concat(a,"-menu"),f="".concat(a,"-menu-item"),m=o.useContext(ge),w=m.fieldNames,A=m.changeOnSelect,S=m.expandTrigger,D=m.expandIcon,T=m.loadingIcon,O=m.dropdownMenuColumnStyle,b=m.optionRender,x=S==="hover",k=function(V){return y||V},L=o.useMemo(function(){return t.map(function(d){var V,P=d.disabled,K=d.disableCheckbox,N=d[he],R=(V=d[Ye])!==null&&V!==void 0?V:d[w.label],$=d[w.value],J=be(d,w),X=N?N.map(function(Z){return Z[w.value]}):[].concat(ae(i),[$]),_=te(X),Y=h.includes(_),B=s.has(_),U=g.has(_);return{disabled:P,label:R,value:$,isLeaf:J,isLoading:Y,checked:B,halfChecked:U,option:d,disableCheckbox:K,fullPath:X,fullPathKey:_}})},[t,s,w,g,h,i]);return o.createElement("ul",{className:C,role:"menu"},L.map(function(d){var V,P=d.disabled,K=d.label,N=d.value,R=d.isLeaf,$=d.isLoading,J=d.checked,X=d.halfChecked,_=d.option,Y=d.fullPath,B=d.fullPathKey,U=d.disableCheckbox,Z=function(){if(!k(P)){var j=ae(Y);x&&R&&j.pop(),c(j)}},ee=function(){v(_)&&!k(P)&&l(Y,R)},W;return typeof _.title=="string"?W=_.title:typeof K=="string"&&(W=K),o.createElement("li",{key:B,className:Oe(f,(V={},F(V,"".concat(f,"-expand"),!R),F(V,"".concat(f,"-active"),r===N||r===B),F(V,"".concat(f,"-disabled"),k(P)),F(V,"".concat(f,"-loading"),$),V)),style:O,role:"menuitemcheckbox",title:W,"aria-checked":J,"data-path-key":B,onClick:function(){Z(),!U&&(!n||R)&&ee()},onDoubleClick:function(){A&&u(!1)},onMouseEnter:function(){x&&Z()},onMouseDown:function(j){j.preventDefault()}},n&&o.createElement(wn,{prefixCls:"".concat(a,"-checkbox"),checked:J,halfChecked:X,disabled:k(P)||U,disableCheckbox:U,onClick:function(j){U||(j.stopPropagation(),ee())}}),o.createElement("div",{className:"".concat(f,"-content")},b?b(_):K),!$&&D&&!R&&o.createElement("div",{className:"".concat(f,"-expand-icon")},D),$&&T&&o.createElement("div",{className:"".concat(f,"-loading-icon")},T))}))}var In=function(a,n){var t=o.useContext(ge),r=t.values,i=r[0],u=o.useState([]),l=Q(u,2),c=l[0],s=l[1];return o.useEffect(function(){a||s(i||[])},[n,i]),[c,s]};const Dn=function(e,a,n,t,r,i,u){var l=u.direction,c=u.searchValue,s=u.toggleOpen,g=u.open,h=l==="rtl",v=o.useMemo(function(){for(var O=-1,b=a,x=[],k=[],L=t.length,d=Ue(a,n),V=function($){var J=b.findIndex(function(X,_){return(d[_]?te(d[_]):X[n.value])===t[$]});if(J===-1)return 1;O=J,x.push(O),k.push(t[$]),b=b[O][n.children]},P=0;P<L&&b&&!V(P);P+=1);for(var K=a,N=0;N<x.length-1;N+=1)K=K[x[N]][n.children];return[k,O,K,d]},[t,n,a]),y=Q(v,4),C=y[0],f=y[1],m=y[2],w=y[3],A=function(b){r(b)},S=function(b){var x=m.length,k=f;k===-1&&b<0&&(k=x);for(var L=0;L<x;L+=1){k=(k+b+x)%x;var d=m[k];if(d&&!d.disabled){var V=C.slice(0,-1).concat(w[k]?te(w[k]):d[n.value]);A(V);return}}},D=function(){if(C.length>1){var b=C.slice(0,-1);A(b)}else s(!1)},T=function(){var b,x=((b=m[f])===null||b===void 0?void 0:b[n.children])||[],k=x.find(function(d){return!d.disabled});if(k){var L=[].concat(ae(C),[k[n.value]]);A(L)}};o.useImperativeHandle(e,function(){return{onKeyDown:function(b){var x=b.which;switch(x){case le.UP:case le.DOWN:{var k=0;x===le.UP?k=-1:x===le.DOWN&&(k=1),k!==0&&S(k);break}case le.LEFT:{if(c)break;h?T():D();break}case le.RIGHT:{if(c)break;h?D():T();break}case le.BACKSPACE:{c||D();break}case le.ENTER:{if(C.length){var L=m[f],d=(L==null?void 0:L[he])||[];d.length?i(d.map(function(V){return V[n.value]}),d[d.length-1]):i(C,m[f])}break}case le.ESC:s(!1),g&&b.stopPropagation()}},onKeyUp:function(){}}})};var ze=o.forwardRef(function(e,a){var n,t,r,i=e.prefixCls,u=e.multiple,l=e.searchValue,c=e.toggleOpen,s=e.notFoundContent,g=e.direction,h=e.open,v=e.disabled,y=o.useRef(null),C=g==="rtl",f=o.useContext(ge),m=f.options,w=f.values,A=f.halfValues,S=f.fieldNames,D=f.changeOnSelect,T=f.onSelect,O=f.searchOptions,b=f.dropdownPrefixCls,x=f.loadData,k=f.expandTrigger,L=b||i,d=o.useState([]),V=Q(d,2),P=V[0],K=V[1],N=function(p){if(!(!x||l)){var E=me(p,m,S),M=E.map(function(re){var ue=re.option;return ue}),H=M[M.length-1];if(H&&!be(H,S)){var ie=te(p);K(function(re){return[].concat(ae(re),[ie])}),x(M)}}};o.useEffect(function(){P.length&&P.forEach(function(I){var p=kn(I),E=me(p,m,S,!0).map(function(H){var ie=H.option;return ie}),M=E[E.length-1];(!M||M[S.children]||be(M,S))&&K(function(H){return H.filter(function(ie){return ie!==I})})})},[m,P,S]);var R=o.useMemo(function(){return new Set(pe(w))},[w]),$=o.useMemo(function(){return new Set(pe(A))},[A]),J=In(u,h),X=Q(J,2),_=X[0],Y=X[1],B=function(p){Y(p),N(p)},U=function(p){if(v)return!1;var E=p.disabled,M=be(p,S);return!E&&(M||D||u)},Z=function(p,E){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;T(p),!u&&(E||D&&(k==="hover"||M))&&c(!1)},ee=o.useMemo(function(){return l?O:m},[l,O,m]),W=o.useMemo(function(){for(var I=[{options:ee}],p=ee,E=Ue(p,S),M=function(){var re=_[H],ue=p.find(function(xe,Ce){return(E[Ce]?te(E[Ce]):xe[S.value])===re}),de=ue==null?void 0:ue[S.children];if(!(de!=null&&de.length))return 1;p=de,I.push({options:de})},H=0;H<_.length&&!M();H+=1);return I},[ee,_,S]),z=function(p,E){U(E)&&Z(p,be(E,S),!0)};Dn(a,ee,S,_,B,z,{direction:g,searchValue:l,toggleOpen:c,open:h}),o.useEffect(function(){if(!l)for(var I=0;I<_.length;I+=1){var p,E=_.slice(0,I+1),M=te(E),H=(p=y.current)===null||p===void 0?void 0:p.querySelector('li[data-path-key="'.concat(M.replace(/\\{0,2}"/g,'\\"'),'"]'));H&&On(H)}},[_,l]);var j=!((n=W[0])!==null&&n!==void 0&&(n=n.options)!==null&&n!==void 0&&n.length),ce=[(t={},F(t,S.value,"__EMPTY__"),F(t,Ye,s),F(t,"disabled",!0),t)],fe=oe(oe({},e),{},{multiple:!j&&u,onSelect:Z,onActive:B,onToggleOpen:c,checkedSet:R,halfCheckedSet:$,loadingKeys:P,isSelectable:U}),q=j?[{options:ce}]:W,se=q.map(function(I,p){var E=_.slice(0,p),M=_[p];return o.createElement(Mn,Ae({key:p},fe,{prefixCls:L,options:I.options,prevValuePath:E,activeValue:M}))});return o.createElement(En,{open:h},o.createElement("div",{className:Oe("".concat(L,"-menus"),(r={},F(r,"".concat(L,"-menu-empty"),j),F(r,"".concat(L,"-rtl"),C),r)),ref:y},se))}),Ln=o.forwardRef(function(e,a){var n=pn();return o.createElement(ze,Ae({},e,n,{ref:a}))});function An(){}function Rn(e){var a,n=e,t=n.prefixCls,r=t===void 0?"rc-cascader":t,i=n.style,u=n.className,l=n.options,c=n.checkable,s=n.defaultValue,g=n.value,h=n.fieldNames,v=n.changeOnSelect,y=n.onChange,C=n.showCheckedStrategy,f=n.loadData,m=n.expandTrigger,w=n.expandIcon,A=w===void 0?">":w,S=n.loadingIcon,D=n.direction,T=n.notFoundContent,O=T===void 0?"Not Found":T,b=n.disabled,x=!!c,k=De(s,{value:g,postState:ke}),L=Q(k,2),d=L[0],V=L[1],P=o.useMemo(function(){return Be(h)},[JSON.stringify(h)]),K=Xe(P,l),N=Q(K,3),R=N[0],$=N[1],J=N[2],X=Je(R,P),_=Ge(x,d,$,J,X),Y=Q(_,3),B=Y[0],U=Y[1],Z=Y[2],ee=ye(function(q){if(V(q),y){var se=ke(q),I=se.map(function(M){return me(M,R,P).map(function(H){return H.option})}),p=x?se:se[0],E=x?I:I[0];y(p,E)}}),W=qe(x,ee,B,U,Z,$,J,C),z=ye(function(q){W(q)}),j=o.useMemo(function(){return{options:R,fieldNames:P,values:B,halfValues:U,changeOnSelect:v,onSelect:z,checkable:c,searchOptions:[],dropdownPrefixCls:void 0,loadData:f,expandTrigger:m,expandIcon:A,loadingIcon:S,dropdownMenuColumnStyle:void 0}},[R,P,B,U,v,z,c,f,m,A,S]),ce="".concat(r,"-panel"),fe=!R.length;return o.createElement(ge.Provider,{value:j},o.createElement("div",{className:Oe(ce,(a={},F(a,"".concat(ce,"-rtl"),D==="rtl"),F(a,"".concat(ce,"-empty"),fe),a),u),style:i},fe?O:o.createElement(ze,{prefixCls:r,searchValue:"",multiple:x,toggleOpen:An,open:!0,direction:D,disabled:b})))}var Tn=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","autoClearSearchValue","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","dropdownStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy","optionRender"],Te=o.forwardRef(function(e,a){var n=e.id,t=e.prefixCls,r=t===void 0?"rc-cascader":t,i=e.fieldNames,u=e.defaultValue,l=e.value,c=e.changeOnSelect,s=e.onChange,g=e.displayRender,h=e.checkable,v=e.autoClearSearchValue,y=v===void 0?!0:v,C=e.searchValue,f=e.onSearch,m=e.showSearch,w=e.expandTrigger,A=e.options,S=e.dropdownPrefixCls,D=e.loadData,T=e.popupVisible,O=e.open,b=e.popupClassName,x=e.dropdownClassName,k=e.dropdownMenuColumnStyle,L=e.dropdownStyle,d=e.popupPlacement,V=e.placement,P=e.onDropdownVisibleChange,K=e.onPopupVisibleChange,N=e.expandIcon,R=N===void 0?">":N,$=e.loadingIcon,J=e.children,X=e.dropdownMatchSelectWidth,_=X===void 0?!1:X,Y=e.showCheckedStrategy,B=Y===void 0?He:Y,U=e.optionRender,Z=hn(e,Tn),ee=mn(n),W=!!h,z=De(u,{value:l,postState:ke}),j=Q(z,2),ce=j[0],fe=j[1],q=o.useMemo(function(){return Be(i)},[JSON.stringify(i)]),se=Xe(q,A),I=Q(se,3),p=I[0],E=I[1],M=I[2],H=De("",{value:C,postState:function(G){return G||""}}),ie=Q(H,2),re=ie[0],ue=ie[1],de=function(G,ve){ue(G),ve.source!=="blur"&&f&&f(G)},xe=Pn(m),Ce=Q(xe,2),Qe=Ce[0],Ke=Ce[1],_e=yn(re,p,q,S||r,Ke,c||W),Ze=Je(p,q),en=Ge(W,ce,E,M,Ze),Ve=Q(en,3),Se=Ve[0],Pe=Ve[1],Ee=Ve[2],nn=o.useMemo(function(){var ne=pe(Se),G=je(ne,E,B);return[].concat(ae(Ee),ae(M(G)))},[Se,E,M,Ee,B]),an=_n(nn,p,q,W,g),Ne=ye(function(ne){if(fe(ne),s){var G=ke(ne),ve=G.map(function(vn){return me(vn,p,q).map(function(fn){return fn.option})}),Me=W?G:G[0],Ie=W?ve:ve[0];s(Me,Ie)}}),tn=qe(W,Ne,Se,Pe,Ee,E,M,B),we=ye(function(ne){(!W||y)&&ue(""),tn(ne)}),rn=function(G,ve){if(ve.type==="clear"){Ne([]);return}var Me=ve.values[0],Ie=Me.valueCells;we(Ie)},on=O!==void 0?O:T,ln=x||b,un=V||d,cn=function(G){P==null||P(G),K==null||K(G)},sn=o.useMemo(function(){return{options:p,fieldNames:q,values:Se,halfValues:Pe,changeOnSelect:c,onSelect:we,checkable:h,searchOptions:_e,dropdownPrefixCls:S,loadData:D,expandTrigger:w,expandIcon:R,loadingIcon:$,dropdownMenuColumnStyle:k,optionRender:U}},[p,q,Se,Pe,c,we,h,_e,S,D,w,R,$,k,U]),$e=!(re?_e:p).length,dn=re&&Ke.matchInputWidth||$e?{}:{minWidth:"auto"};return o.createElement(ge.Provider,{value:sn},o.createElement(gn,Ae({},Z,{ref:a,id:ee,prefixCls:r,autoClearSearchValue:y,dropdownMatchSelectWidth:_,dropdownStyle:oe(oe({},dn),L),displayValues:an,onDisplayValuesChange:rn,mode:W?"multiple":void 0,searchValue:re,onSearch:de,showSearch:Qe,OptionList:Ln,emptyOptions:$e,open:on,dropdownClassName:ln,placement:un,onDropdownVisibleChange:cn,getRawInputElement:function(){return J}})))});Te.SHOW_PARENT=He;Te.SHOW_CHILD=Fe;Te.Panel=Rn;export{Te as C,Rn as P};
