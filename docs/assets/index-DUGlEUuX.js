import{j as l,r as x}from"./react-jFU0esu9.js";import{c as M}from"./react-dom-Dl7ImxMp.js";import{Z as O}from"./@chengzs-B9osRxLP.js";import{P as z,l as E}from"./@ant-design-vYfmaQbJ.js";import{r as A,R as B}from"./react-grid-layout-Cflfy81z.js";import"./react-resizable-DrwK1ocs.js";import{I as D,B as I,f as F,g as L,h as N}from"./antd-oNOYxRgF.js";import"./classnames-ixCMRz17.js";import"./scheduler-CKyTKYc2.js";import"./rc-util-BGVI6VDl.js";import"./@babel-D91nw8a6.js";import"./react-is-CX4zgkE_.js";import"./@emotion-CW87jbl0.js";import"./stylis-OW4gUFyn.js";import"./resize-observer-polyfill-8yP03Dqn.js";import"./@ctrl-DOFZgDuz.js";import"./fast-equals-DJsmz3wu.js";import"./clsx-ByBOeamg.js";import"./prop-types-Chjiymov.js";import"./react-draggable-AqVxbgEw.js";import"./rc-resize-observer-CUhI3ncJ.js";import"./rc-motion-BS5OivOI.js";import"./rc-menu-Cq6fhH-B.js";import"./rc-overflow-hCo2P9PI.js";import"./@rc-component-CHdcDd_A.js";import"./rc-checkbox-DvM5bGnT.js";import"./rc-picker-CJsH3094.js";import"./dayjs-CFuJ6XEk.js";import"./rc-tabs-FMZwvOBT.js";import"./rc-dropdown-9JAPrd-n.js";import"./rc-cascader-C5kpZlHl.js";import"./rc-select-BDPW5iLI.js";import"./rc-virtual-list-Bs7hgjzb.js";import"./rc-tree-D5O0fmFe.js";import"./rc-tooltip-D2YZkEqo.js";import"./rc-segmented-O_klIZvD.js";import"./rc-input-number-C1-4KHKU.js";import"./rc-input-Bmy_hX1Q.js";import"./rc-textarea-DDW_S4__.js";import"./rc-slider-kNAhX2hO.js";import"./rc-field-form-aAIjOQqN.js";import"./scroll-into-view-if-needed-BZeNfFF0.js";import"./compute-scroll-into-view-DWa9QgjM.js";import"./rc-dialog-jIWvuovY.js";import"./rc-mentions-Ctc9cnme.js";import"./throttle-debounce-D_F81KiP.js";import"./rc-rate-CQ_IbKNE.js";import"./rc-switch-Ccq3t_eK.js";import"./rc-upload-CQIGKHjm.js";import"./rc-pagination-B12L4aEg.js";import"./rc-collapse-CG-mekCe.js";import"./rc-progress-E9-1mLH8.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))f(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const b of r.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&f(b)}).observe(document,{childList:!0,subtree:!0});function d(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function f(a){if(a.ep)return;a.ep=!0;const r=d(a);fetch(a.href,r)}})();function q(){const s={layout:"horizontal",labelCol:{span:2},onFinish:d=>{console.log(d)}},e=[{type:"text",item:{label:"text",name:"text",labelCol:{span:4},style:{width:"50%"}},option:{prefix:l.jsx(z,{})}},{type:"password",item:{label:"password",name:"password",labelCol:{span:4},style:{width:"50%"}}},{type:"textarea",item:{label:"textarea",name:"textarea"}},{type:"list",item:{label:"list",name:"list",items:[{type:"text",item:{label:"text",name:"text"}},{type:"password",item:{label:"password",name:"password"}}]}}];return l.jsx(O,{form:s,items:e})}function p(){return(performance.now().toString(36)+Math.random().toString(36)).replace(/\./g,"")}const G=s=>{switch(s){case"text":return{type:"text",item:{label:"输入框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{placeholder:"",showCount:!1,maxLength:void 0}};case"password":return{type:"password",item:{label:"密码框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}}};case"textarea":return{type:"textarea",item:{label:"区域输入框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{placeholder:"",rows:5,showCount:!1,maxLength:void 0}};case"number":return{type:"number",item:{label:"数字输入框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{controls:!0,min:0,max:100}};case"mentions":return{type:"mentions",item:{label:"提及",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{prefix:"@",rows:1,options:[]}};case"radio":return{type:"radio",item:{label:"单选框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{optionType:"default",options:[]}};case"checkbox":return{type:"checkbox",item:{label:"多选框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{options:[]}};case"rate":return{type:"rate",item:{label:"评分",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{count:5,allowHalf:!1}};case"select":return{type:"select",item:{label:"下拉选择框",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{showSearch:!1,allowClear:!1,mode:"",options:[]}};case"cascader":return{type:"cascader",item:{label:"级联选择器",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{options:[]}};case"slider":return{type:"slider",item:{label:"滑动输入条",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{range:!1,min:0,max:100,step:1}};case"switch":return{type:"switch",item:{label:"开关",name:p(),valuePropName:"checked",labelCol:void 0,rules:[],style:{}},option:{defaultChecked:!1}};case"color":return{type:"color",item:{label:"颜色",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}}};case"date":return{type:"date",item:{label:"日期选择",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{picker:"date",showTime:!1}};case"time":return{type:"time",item:{label:"时间选择",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{format:"HH:mm:ss"}};case"dateRange":return{type:"dateRange",item:{label:"日期范围",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{picker:"date",showTime:!1}};case"timeRange":return{type:"timeRange",item:{label:"时间范围",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{format:"HH:mm:ss"}};case"upload":return{type:"upload",item:{label:"上传",name:p(),initialValue:"",labelCol:void 0,rules:[],style:{}},option:{action:"",accept:"",maxSize:5,listType:"text",maxCount:1},innerHtml:"上传"};case"button":return{type:"button",item:{name:p(),style:{}},option:{type:"default"},innerHtml:"普通按钮"};case"submit":return{type:"submit",item:{name:p(),style:{}},option:{type:"primary"},innerHtml:"提交"};case"reset":return{type:"reset",item:{name:p(),style:{}},option:{type:"default"},innerHtml:"重置"};case"list":return{type:"list",item:{label:"表单列表",name:p(),items:[],style:{}}}}};function K({options:s,onChange:e}){const[d,f]=x.useState(s),a=(c,u,h)=>{f(w=>(w[h][u]=c.target.value,e==null||e(w),[...w]))},r=c=>{f(u=>(u.splice(c,1),e==null||e(u),[...u]))},b=()=>{f(c=>(c.push({label:"",value:p()}),e==null||e(c),[...c]))};return l.jsxs("div",{className:"option",children:[d.map((c,u)=>l.jsxs("div",{className:"tag",children:[l.jsx(D,{placeholder:"label 标签",title:"label 标签",value:c.label,onChange:h=>a(h,"label",u)}),l.jsx(D,{placeholder:"value 值",title:"value 值",value:c.value,onChange:h=>a(h,"value",u)}),l.jsx(I,{size:"small",shape:"circle",danger:!0,onClick:()=>r(u),children:"-"})]},u)),l.jsx(I,{type:"primary",onClick:b,children:"新增选项"})]})}function Z({value:s,onChange:e}){const[d,f]=x.useState(s),a=(r,b)=>{f(c=>{let u={...c,[b]:r||void 0};return!u.offset&&!u.span&&(u=void 0),e==null||e(u),u})};return l.jsxs("div",{className:"label-col",children:[l.jsx(F,{title:"标签栅格",placeholder:"栅格 span",value:d==null?void 0:d.span,onChange:r=>a(r,"span")}),l.jsx(F,{title:"标签偏移",placeholder:"偏移 offset",value:d==null?void 0:d.offset,onChange:r=>a(r,"offset")})]})}function W({value:s,onChange:e}){const[d,f]=x.useState(!1),[a,r]=x.useState(s||[]),b=c=>{r(c),e==null||e(c),f(!1)};return l.jsxs(l.Fragment,{children:[l.jsx(I,{type:"primary",onClick:()=>f(!0),children:"配置子项"}),l.jsx(L,{width:"90%",title:"Basic Modal",open:d,onCancel:()=>f(!1),footer:null,children:l.jsx(R,{showSubmit:!0,value:a,onChange:c=>b(c)})})]})}const J=s=>{var V,_;if(!s)return;const e=((V=s.extra)==null?void 0:V.mItem)||[],d=Object.keys((e==null?void 0:e.item)||{}),f=Object.keys((e==null?void 0:e.option)||{}),a=(e==null?void 0:e.innerHtml)===void 0?"":"innerHtml",r=["text","number","switch"],b=[["label","name","initialValue","rules","placeholder","prefix","format","action","accept","valueSplit"],["rows","maxLength","min","max","count","step","maxSize","maxCount"],["showCount","controls","allowHalf","showSearch","allowClear","range","defaultChecked","showTime"]],c=d.map(i=>{var j;if(i==="items")return{type:"custom",item:{label:i,name:`${s.i}_item_${i}`},innerHtml:l.jsx(W,{value:e.item.items})};if(i==="labelCol")return{type:"custom",item:{label:i,name:`${s.i}_item_${i}`},innerHtml:l.jsx(Z,{value:e.item.labelCol})};const g=r[b.findIndex(C=>C.includes(i))];if(g)return{type:g,item:{label:i,name:`${s.i}_item_${i}`,initialValue:(j=e==null?void 0:e.item)==null?void 0:j[i]}}}),u=f.map(i=>{var j,C,$,H,S,T;if(i==="optionType")return{type:"radio",item:{label:i,name:`${s.i}_option_${i}`,initialValue:(j=e==null?void 0:e.option)==null?void 0:j[i]},option:{optionType:"button",options:[{label:"default",value:"default"},{label:"button",value:"button"}]}};if(i==="options")return{type:"custom",item:{label:i,name:`${s.i}_option_${i}`},innerHtml:l.jsx(K,{options:e.option.options})};if(i==="mode")return{type:"radio",item:{label:i,name:`${s.i}_option_${i}`,initialValue:(C=e==null?void 0:e.option)==null?void 0:C[i]},option:{optionType:"button",options:[{label:"single",value:""},{label:"tags",value:"tags"},{label:"multiple",value:"multiple"}]}};if(i==="picker")return{type:"radio",item:{label:i,name:`${s.i}_option_${i}`,initialValue:($=e==null?void 0:e.option)==null?void 0:$[i]},option:{optionType:"button",options:[{label:"date",value:"date"},{label:"week",value:"week"},{label:"month",value:"month"},{label:"quarter",value:"quarter"},{label:"year",value:"year"}]}};if(i==="listType")return{type:"radio",item:{label:i,name:`${s.i}_option_${i}`,initialValue:(H=e==null?void 0:e.option)==null?void 0:H[i]},option:{optionType:"button",options:[{label:"text",value:"text"},{label:"picture",value:"picture"},{label:"picture-card",value:"picture-card"},{label:"picture-circle",value:"picture-circle"}]}};if(i==="type")return{type:"radio",item:{label:i,name:`${s.i}_option_${i}`,initialValue:(S=e==null?void 0:e.option)==null?void 0:S[i]},option:{optionType:"button",options:[{label:"primary",value:"primary"},{label:"ghost",value:"ghost"},{label:"dashed",value:"dashed"},{label:"link",value:"link"},{label:"text",value:"text"},{label:"default",value:"default"}]}};const g=r[b.findIndex(t=>t.includes(i))];if(g)return{type:g,item:{label:i,name:`${s.i}_option_${i}`,initialValue:(T=e==null?void 0:e.option)==null?void 0:T[i]}}}),h=a?{type:"text",item:{label:a,name:`${s.i}_${a}`,initialValue:(_=e==null?void 0:e.option)==null?void 0:_[a]}}:void 0;return{items:[...c,...u,h].filter(i=>i)}},Q=[{type:"radio",item:{label:"标签对齐",name:"labelAlign",initialValue:"right"},option:{optionType:"button",options:[{label:"right",value:"right"},{label:"left",value:"left"}]}},{type:"number",item:{label:"标签栅格",name:"labelCol_span",initialValue:void 0},option:{max:24,min:0}},{type:"number",item:{label:"标签偏移",name:"labelCol_offset",initialValue:void 0},option:{max:24,min:0}},{type:"radio",item:{label:"布局",name:"layout",initialValue:"horizontal"},option:{optionType:"button",options:[{label:"horizontal",value:"horizontal"},{label:"vertical",value:"vertical"},{label:"inline",value:"inline"}]}}],U=A.WidthProvider(B);function R({showSubmit:s=!1,value:e,onChange:d}){const f=[{type:"text",label:"文本框"},{type:"password",label:"密码框"},{type:"textarea",label:"多行文本框"},{type:"number",label:"数字输入框"},{type:"mentions",label:"提及框"},{type:"radio",label:"单选框"},{type:"checkbox",label:"多选框"},{type:"select",label:"下拉框"},{type:"cascader",label:"级联框"},{type:"rate",label:"分数框"},{type:"slider",label:"滑块"},{type:"switch",label:"开关"},{type:"color",label:"颜色选择框"},{type:"time",label:"时间选择"},{type:"timeRange",label:"时间范围"},{type:"date",label:"日期选择"},{type:"dateRange",label:"日期范围"},{type:"upload",label:"上传"},{type:"button",label:"按钮"},{type:"submit",label:"提交按钮"},{type:"reset",label:"重置按钮"},{type:"list",label:"list 列表"}],[a,r]=x.useState([]),[b,c]=x.useState(""),[u,h]=x.useState({}),[w,V]=x.useState(!1);x.useEffect(()=>{e&&r((e==null?void 0:e.map(t=>{var n;return{i:(n=t.item)==null?void 0:n.name,x:12,y:100,w:12,h:1.5,maxH:1.5,minH:1.5,extra:{mItem:t}}}))||[])},[e]);const _=x.useMemo(()=>{const t=a.find(o=>o.i===b),n=J(t);return n==null?void 0:n.items},[a,b]),i=(t,n)=>{t.dataTransfer.setData("text/plain",n)},g=t=>{t.preventDefault()},j=t=>{var y;t.preventDefault();const n=t.dataTransfer.getData("text/plain"),o=G(n);if(!o)return;const m={i:(y=o.item)==null?void 0:y.name,x:12,y:100,w:12,h:1.5,maxH:1.5,minH:1.5,extra:{mItem:o}};c(m.i),r(v=>[...v,m])},C=t=>{r(n=>{const o=t.map(m=>{var y;return{...m,extra:(y=n.find(v=>v.i===m.i))==null?void 0:y.extra}});o.sort((m,y)=>m.y===y.y?m.x-y.x:m.y-y.y);for(const m of o)!m.extra||!m.extra.mItem||!m.extra.mItem.item||(m.extra.mItem.item.style={width:`${(m.w/12*100).toFixed(2)}%`});return o})},$=t=>{const n=Object.keys(t)[0],o=n.split("_");r(m=>{const y=[...m],v=m.find(P=>P.i===b);if(!v)return m;switch(o[o.length-1]){case"rules":v.extra.mItem.item.rules=[{required:!0,message:t[n]}];break;default:o.length===2?v.extra.mItem[o[1]]=t[n]:o.length===3&&(v.extra.mItem[o[1]][o[2]]=t[n])}return y})},H=t=>{const n=Object.keys(t)[0],o=n.split("_");h(m=>{const y={...m};return o.length===1?y[o[0]]=t[n]:o.length===2&&(y[o[0]]?y[o[0]][o[1]]=t[n]:y[o[0]]={[o[1]]:t[n]}),y})},S=()=>{console.log(a.map(t=>t.extra.mItem),"item"),console.log(u,"form"),V(!0)},T=t=>{const n=a.findIndex(o=>o.i===t);r(o=>{const m=[...o];return m.splice(n,1),m})};return l.jsxs("div",{className:"form-design",children:[l.jsx("div",{className:"left",children:f.map(t=>l.jsx("div",{className:"item",draggable:!0,onDragStart:n=>i(n,t.type),children:t.label},t.type))}),l.jsx("div",{className:"center",onDragOver:g,onDrop:j,children:l.jsx(U,{className:"layout",layout:a,cols:12,rowHeight:40,onLayoutChange:t=>C(t),children:a.map(t=>{var n,o;return l.jsxs("div",{className:`item ${t.i===b?"active":""}`,onClick:()=>c(t.i),children:[l.jsx("div",{className:"ibtns",children:l.jsx(E,{style:{color:"red"},onClick:()=>T(t.i)})}),((n=t.extra.mItem.item)==null?void 0:n.label)||((o=t.extra.mItem.list)==null?void 0:o.label)||t.extra.mItem.innerHtml]},t.i)})})}),l.jsxs("div",{className:"right",children:[l.jsx(N,{defaultActiveKey:"2",items:[{key:"1",label:"控件配置",children:l.jsx(O,{form:{onValuesChange:$},items:_})},{key:"2",label:"全局配置",children:l.jsx(O,{form:{onValuesChange:H},items:Q})}]}),l.jsx(I,{type:"primary",onClick:S,children:"预览"}),s&&l.jsx(I,{type:"primary",onClick:()=>d==null?void 0:d(a.map(t=>t.extra.mItem)),children:"保存"})]}),l.jsx(L,{title:"预览",width:"70%",open:w,onCancel:()=>V(!1),destroyOnClose:!0,children:l.jsx(O,{form:u,items:a.map(t=>t.extra.mItem)})})]})}function X(){return l.jsx(l.Fragment,{children:l.jsx(R,{})})}function Y(){const s=[{key:"1",label:"Form",children:l.jsx(q,{})},{key:"2",label:"FormDesign",children:l.jsx(X,{})}];return l.jsx(l.Fragment,{children:l.jsx(N,{defaultActiveKey:"1",items:s})})}M.createRoot(document.getElementById("root")).render(l.jsx(x.StrictMode,{children:l.jsx(Y,{})}));
